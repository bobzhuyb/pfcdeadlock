\secspace
\section{Related Work}
\secspace

\para{RDMA in datacenters.} RDMA has been used for improving distributed application performance,
like in-memory key value store~\cite{mitchell13atc, farm, kalia14sigcomm}, 
Hadoop RPC~\cite{hadooprdma} and HBase~\cite{hbaserdma}.
It has been recently deployed inside modern datacenters~\cite{timely,dcqcn,rdmascale}, based on
RoCE (RDMA over Converged Ethernet), which relies on PFC creating a lossless Ethernet.
Recent works~\cite{timely,dcqcn} discuss the transport congestion control protocols. However,
how to prevent PFC deadlock from happening in the lossless Ethernet has been pointed out 
but not well addressed. In this paper, we aim to get deeper understanding on deadlock 
and possible mitigations.

\para{Deadlock-free routing.} To avoid deadlock in lossless networks, previous 
literatures~\cite{tcpbolt,karol2003prevention,lash,sancho2004,wu2003fault} focus on deadlock-free routing, 
{\em i.e.,} with any traffic matrix, packet formats or flow rates, no deadlock 
can occur. It is also proved that eliminating cyclic buffer dependency is a necessary and
sufficient condition for deadlock-free routing~\cite{deadlockfree}. However, deadlock-free
routing is a loose condition for preventing deadlock, and it is challenging to eliminate 
cyclic buffer dependency in practice. Our work explores how we may control the flows,
packet formats and switch configurations to avoid deadlock even if routing is not deadlock-free.






